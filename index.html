<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DTC Bridge (Test UI)</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <div>
          <div class="title">DTC Bridge (Test UI)</div>
          <div class="sub">Linea ↔ Base • LayerZero V2 OFT</div>
        </div>
        <button id="btnConnect" class="btn primary">Connect Wallet</button>
      </div>

      <div class="row">
        <button id="btnSwitchLinea" class="btn">Switch to Linea</button>
        <button id="btnSwitchBase" class="btn">Switch to Base</button>
        <div class="pill" id="netLine">Network: —</div>
        <div class="wallet" id="walletLine">Not connected</div>
      </div>

      <div class="grid">
        <div class="field">
          <label>Direction</label>
          <select id="direction">
            <option value="LINEA_TO_BASE">Linea → Base</option>
            <option value="BASE_TO_LINEA">Base → Linea</option>
          </select>
          <div class="hint" id="directionHint">—</div>
        </div>

        <div class="field">
          <label>Amount (DTC)</label>
          <input id="amount" type="text" placeholder="e.g. 42" value="42" />
          <div class="hint" id="balLine">Balance: —</div>
        </div>

        <div class="field">
          <label>Slippage (min receive, %)</label>
          <input id="slippage" type="text" placeholder="e.g. 0.5" value="0.5" />
          <div class="hint">Example: 0.5 = minAmount is 99.5% of amount</div>
        </div>

        <div class="field">
          <label>Destination gas (lzReceive)</label>
          <input id="lzGas" type="text" placeholder="e.g. 200000" value="200000" />
          <div class="hint">Start with 200k. If dst execution needs more, increase.</div>
        </div>
      </div>

      <div class="actions">
        <button id="btnRefresh" class="btn">Refresh</button>
        <button id="btnQuote" class="btn">Quote Native Fee</button>
        <button id="btnApprove" class="btn">Approve (if needed)</button>
        <button id="btnSend" class="btn primary">Send</button>
      </div>

      <div class="meta">
        <div class="metaRow">
          <div class="metaLabel">Spender (approve)</div>
          <div class="metaVal mono" id="spenderLine">—</div>
        </div>
        <div class="metaRow">
          <div class="metaLabel">Send Contract</div>
          <div class="metaVal mono" id="senderLine">—</div>
        </div>
        <div class="metaRow">
          <div class="metaLabel">Peer (dstEid)</div>
          <div class="metaVal mono" id="peerLine">—</div>
        </div>
        <div class="metaRow">
          <div class="metaLabel">Quoted Native Fee</div>
          <div class="metaVal mono" id="feeLine">—</div>
        </div>
      </div>

      <details class="debug">
        <summary>Debug (optional): RPC URL for reliable revert decoding</summary>
        <div class="debugGrid">
          <div class="field">
            <label>Debug RPC (Linea)</label>
            <input id="rpcLinea" type="text" placeholder="https://linea-mainnet.g.alchemy.com/v2/..." />
          </div>
          <div class="field">
            <label>Debug RPC (Base)</label>
            <input id="rpcBase" type="text" placeholder="https://base-mainnet.g.alchemy.com/v2/..." />
          </div>
          <div class="actions">
            <button id="btnSimulate" class="btn">Simulate (eth_call)</button>
          </div>
        </div>
      </details>

      <div class="logHead">
        <div>Log</div>
        <button id="btnClear" class="btn tiny">Clear</button>
      </div>
      <pre id="log" class="log"></pre>

      <div class="footerNote">Test UI only. Do not use for production.</div>
    </div>
  </div>

  <script type="module" src="./app.js"></script>
</body>
</html>
